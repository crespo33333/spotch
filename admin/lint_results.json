
> admin@0.0.0 lint
> eslint . --format json

[{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/src/App.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/jun/.gemini/antigravity/scratch/spotch/admin/src/App.tsx:34:7\n  32 |     const savedId = localStorage.getItem('spotch_admin_id');\n  33 |     if (savedId) {\n> 34 |       setAdminId(savedId);\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |       setIsLoggedIn(true);\n  36 |     }\n  37 |   }, []);","line":34,"column":7,"nodeType":null,"endLine":34,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2664,2667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2664,2667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3133,3136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3133,3136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3468,3471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3468,3471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3724,3727],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3724,3727],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4160,4163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4160,4163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4478,4481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4478,4481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":451,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":451,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21504,21507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21504,21507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":461,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":461,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21850,21853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21850,21853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { useState, useEffect } from 'react';\nimport { trpc } from './utils/trpc';\nimport { Activity, Users, MapPin, Bell, Trash2, Shield, Search, Ban, CheckCircle } from 'lucide-react';\n\nfunction App() {\n  const [adminId, setAdminId] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [activeTab, setActiveTab] = useState<'dashboard' | 'users' | 'spots' | 'announcements'>('dashboard');\n\n  // Form States\n  const [notifMessage, setNotifMessage] = useState('');\n  const [targetUser, setTargetUser] = useState<{ id: number; name: string } | null>(null);\n  const [directNotifMessage, setDirectNotifMessage] = useState('');\n  const [editingBroadcast, setEditingBroadcast] = useState<{ id: number; title: string; body: string; link?: string | null } | null>(null);\n\n  // Queries\n  const { data: spots, refetch: refetchSpots } = trpc.spot.getRankings.useQuery(undefined, { enabled: isLoggedIn });\n  const { data: stats, refetch: refetchStats } = trpc.admin.getStats.useQuery(undefined, { enabled: isLoggedIn });\n  const { data: userList, refetch: refetchUsers } = trpc.admin.getAllUsers.useQuery(undefined, { enabled: isLoggedIn });\n  const { data: broadcastList, refetch: refetchBroadcasts } = trpc.admin.listBroadcasts.useQuery(undefined, { enabled: isLoggedIn });\n\n  // Mutations\n  const broadcastMutation = trpc.admin.broadcastPush.useMutation();\n  const sendPushToUserMutation = trpc.admin.sendPushToUser.useMutation();\n  const banMutation = trpc.admin.toggleUserBan.useMutation();\n  const deleteSpotMutation = trpc.admin.deleteSpot.useMutation();\n  const updateBroadcastMutation = trpc.admin.updateBroadcast.useMutation();\n  const deleteBroadcastMutation = trpc.admin.deleteBroadcast.useMutation();\n\n  useEffect(() => {\n    const savedId = localStorage.getItem('spotch_admin_id');\n    if (savedId) {\n      setAdminId(savedId);\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const handleLogin = () => {\n    if (!adminId) return;\n    localStorage.setItem('spotch_admin_id', adminId);\n    setIsLoggedIn(true);\n    setTimeout(() => {\n      refetchSpots();\n      refetchStats();\n      refetchUsers();\n      refetchBroadcasts();\n    }, 500);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('spotch_admin_id');\n    setIsLoggedIn(false);\n    setAdminId('');\n  };\n\n  const sendNotification = async () => {\n    if (!notifMessage) return;\n    try {\n      await broadcastMutation.mutateAsync({\n        title: 'Spotch Announcement ðŸ“¢',\n        body: notifMessage\n      });\n      alert('Sent successfully!');\n      setNotifMessage('');\n      refetchBroadcasts();\n      refetchStats();\n    } catch (e) {\n      alert('Error: ' + (e as any).message);\n    }\n  };\n\n  const handleUpdateBroadcast = async () => {\n    if (!editingBroadcast) return;\n    try {\n      await updateBroadcastMutation.mutateAsync({\n        id: editingBroadcast.id,\n        title: editingBroadcast.title,\n        body: editingBroadcast.body,\n        link: editingBroadcast.link\n      });\n      alert('Updated successfully!');\n      setEditingBroadcast(null);\n      refetchBroadcasts();\n    } catch (e) {\n      alert('Error: ' + (e as any).message);\n    }\n  };\n\n  const handleDeleteBroadcast = async (id: number) => {\n    if (!confirm(\"Are you sure you want to delete this announcement?\")) return;\n    try {\n      await deleteBroadcastMutation.mutateAsync({ id });\n      refetchBroadcasts();\n      refetchStats();\n    } catch (e) {\n      alert(\"Action failed: \" + (e as any).message);\n    }\n  };\n\n  const toggleBan = async (id: number, currentBan: boolean) => {\n    try {\n      await banMutation.mutateAsync({ userId: id, isBanned: !currentBan });\n      refetchUsers();\n    } catch (e) {\n      alert(\"Action failed: \" + (e as any).message);\n    }\n  };\n\n  const sendDirectNotification = async () => {\n    if (!targetUser || !directNotifMessage) return;\n    try {\n      await sendPushToUserMutation.mutateAsync({\n        userId: targetUser.id,\n        title: 'Spotch Alert ðŸ””',\n        body: directNotifMessage\n      });\n      alert('Sent successfully!');\n      setTargetUser(null);\n      setDirectNotifMessage('');\n    } catch (e) {\n      alert('Error: ' + (e as any).message);\n    }\n  };\n\n  const deleteSpot = async (id: number) => {\n    if (!confirm(\"Are you sure you want to deactivate this spot?\")) return;\n    try {\n      await deleteSpotMutation.mutateAsync({ spotId: id });\n      refetchSpots();\n      refetchStats();\n    } catch (e) {\n      alert(\"Action failed: \" + (e as any).message);\n    }\n  };\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"min-h-screen bg-slate-100 flex items-center justify-center\">\n        <div className=\"bg-white p-8 rounded-xl shadow-xl w-96\">\n          <h1 className=\"text-2xl font-black text-slate-900 mb-6 text-center\">Spotch Admin</h1>\n          <input\n            type=\"text\"\n            className=\"w-full p-3 border border-slate-200 rounded-lg mb-4\"\n            placeholder=\"Enter Admin User ID\"\n            value={adminId}\n            onChange={e => setAdminId(e.target.value)}\n          />\n          <button\n            onClick={handleLogin}\n            className=\"w-full bg-[#00C2FF] text-white font-bold py-3 rounded-lg hover:bg-[#00A0D1] transition\"\n          >\n            Access Dashboard\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 flex\">\n      {/* Sidebar */}\n      <aside className=\"w-64 bg-slate-900 text-white p-6 hidden md:flex flex-col justify-between h-screen sticky top-0\">\n        <div>\n          <div className=\"text-2xl font-black text-[#00C2FF] mb-10 tracking-tighter\">Spotch Admin</div>\n          <nav className=\"space-y-2\">\n            <NavItem icon={<Activity />} label=\"Dashboard\" active={activeTab === 'dashboard'} onClick={() => setActiveTab('dashboard')} />\n            <NavItem icon={<Users />} label=\"Users\" active={activeTab === 'users'} onClick={() => setActiveTab('users')} />\n            <NavItem icon={<MapPin />} label=\"Spots\" active={activeTab === 'spots'} onClick={() => setActiveTab('spots')} />\n            <NavItem icon={<Bell />} label=\"Announcements\" active={activeTab === 'announcements'} onClick={() => setActiveTab('announcements')} />\n          </nav>\n        </div>\n        <button onClick={handleLogout} className=\"text-slate-500 text-sm hover:text-white pb-4\">Logout</button>\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"flex-1 p-8 overflow-y-auto\">\n        <header className=\"flex justify-between items-center mb-8\">\n          <h2 className=\"text-3xl font-black text-slate-800 capitalize\">{activeTab}</h2>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"bg-white px-4 py-2 rounded-full border border-slate-200 flex items-center gap-2\">\n              <Search size={16} className=\"text-slate-400\" />\n              <input placeholder=\"Search...\" className=\"outline-none text-sm\" />\n            </div>\n            <div className=\"w-10 h-10 bg-[#FF4785] rounded-full flex items-center justify-center font-bold text-white\">A</div>\n          </div>\n        </header>\n\n        {activeTab === 'dashboard' && (\n          <>\n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n              <StatCard title=\"Total Users\" value={stats?.users || '...'} trend=\"+12%\" icon={<Users className=\"text-[#00C2FF]\" />} />\n              <StatCard title=\"Active Spots\" value={stats?.spots || '...'} trend=\"+5\" icon={<MapPin className=\"text-[#FF4785]\" />} />\n              <StatCard title=\"Broadcasts\" value={broadcastList?.length || '0'} trend=\"+1\" icon={<Bell className=\"text-orange-500\" />} />\n              <StatCard title=\"Revenue (Vol)\" value={`$${stats?.volume || 0}`} trend=\"-\" icon={<Shield className=\"text-green-500\" />} />\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Quick Spots View */}\n              <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100\">\n                <h3 className=\"font-bold text-lg mb-4\">Recent Spots</h3>\n                <div className=\"space-y-4\">\n                  {spots?.slice(0, 5).map(spot => (\n                    <div key={spot.id} className=\"flex items-center justify-between p-4 bg-slate-50 rounded-xl\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"text-2xl\">{spot.country}</div>\n                        <div>\n                          <div className=\"font-bold\">{spot.name}</div>\n                          <div className=\"text-xs text-slate-400\">{spot.points} points collected</div>\n                        </div>\n                      </div>\n                      <button onClick={() => deleteSpot(spot.id)} className=\"text-slate-300 hover:text-red-500 transition\"><Trash2 size={18} /></button>\n                    </div>\n                  ))}\n                  {(!spots || spots.length === 0) && <div className=\"text-slate-400 text-sm italic\">No recent activity</div>}\n                </div>\n              </div>\n\n              {/* Recent Announcements */}\n              <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100\">\n                <h3 className=\"font-bold text-lg mb-4\">Latest Announcements</h3>\n                <div className=\"space-y-4\">\n                  {broadcastList?.slice(0, 5).map(b => (\n                    <div key={b.id} className=\"p-4 bg-slate-50 rounded-xl\">\n                      <div className=\"font-bold text-slate-800\">{b.title}</div>\n                      <div className=\"text-xs text-slate-500 mt-1 line-clamp-2\">{b.body}</div>\n                    </div>\n                  ))}\n                  {(!broadcastList || broadcastList.length === 0) && <div className=\"text-slate-400 text-sm italic\">No announcements sent yet</div>}\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n\n        {activeTab === 'users' && (\n          <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\">\n            <table className=\"w-full text-left\">\n              <thead className=\"bg-slate-50 text-slate-400 text-xs font-black uppercase tracking-widest border-b border-slate-100\">\n                <tr>\n                  <th className=\"px-6 py-4\">User</th>\n                  <th className=\"px-6 py-4\">Role</th>\n                  <th className=\"px-6 py-4\">Joined</th>\n                  <th className=\"px-6 py-4\">Status</th>\n                  <th className=\"px-6 py-4 text-right\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-50 text-sm\">\n                {userList?.map(user => (\n                  <tr key={user.id} className=\"hover:bg-slate-50/50\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-8 h-8 rounded-full bg-slate-100 border border-slate-200\"></div>\n                        <div>\n                          <div className=\"font-bold text-slate-700\">{user.name}</div>\n                          <div className=\"text-xs text-slate-400\">{user.email}</div>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-2 py-1 rounded-full text-[10px] font-black uppercase ${user.role === 'admin' ? 'bg-purple-100 text-purple-600' : 'bg-slate-100 text-slate-600'}`}>\n                        {user.role}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 text-slate-500\">\n                      {new Date(user.createdAt || '').toLocaleDateString()}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {user.isBanned ? (\n                        <div className=\"flex items-center gap-1 text-red-500 font-bold\">\n                          <Ban size={14} /> Banned\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center gap-1 text-green-500 font-bold\">\n                          <CheckCircle size={14} /> Active\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 text-right flex items-center justify-end gap-3\">\n                      <button\n                        onClick={() => setTargetUser({ id: user.id, name: user.name || 'Anonymous' })}\n                        disabled={!user.pushToken}\n                        className={`text-xs font-bold px-2 py-1 rounded border transition ${user.pushToken ? 'text-[#00C2FF] border-[#00C2FF] hover:bg-[#00C2FF] hover:text-white' : 'text-slate-300 border-slate-200 cursor-not-allowed'}`}\n                      >\n                        Push\n                      </button>\n                      <button\n                        onClick={() => toggleBan(user.id, !!user.isBanned)}\n                        className={`font-bold transition ${user.isBanned ? 'text-green-500 hover:text-green-700' : 'text-red-500 hover:text-red-700'}`}\n                      >\n                        {user.isBanned ? 'Unban' : 'Ban'}\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {activeTab === 'announcements' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            {/* New Announcement Form */}\n            <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-fit sticky top-8\">\n              <h3 className=\"font-bold text-lg mb-4 flex items-center gap-2 text-[#00C2FF]\"><Bell size={20} /> Create New Broadcast</h3>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-xs font-black text-slate-400 uppercase tracking-widest mb-2\">Message</label>\n                  <textarea\n                    className=\"w-full border border-slate-200 rounded-xl p-3 h-32 resize-none text-sm outline-none focus:border-[#00C2FF] transition\"\n                    placeholder=\"Wanna share something with all users?\"\n                    value={notifMessage}\n                    onChange={e => setNotifMessage(e.target.value)}\n                  />\n                </div>\n                <button\n                  onClick={sendNotification}\n                  disabled={broadcastMutation.isLoading || !notifMessage}\n                  className=\"w-full bg-[#00C2FF] text-white font-bold py-3 rounded-xl hover:bg-opacity-90 disabled:opacity-50 shadow-lg shadow-[#00C2FF]/20\"\n                >\n                  {broadcastMutation.isLoading ? 'Sending...' : 'Send Global Push'}\n                </button>\n              </div>\n            </div>\n\n            {/* History Table */}\n            <div className=\"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\">\n              <div className=\"px-6 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center\">\n                <h3 className=\"font-bold text-slate-800\">Broadcast History</h3>\n                <button onClick={() => refetchBroadcasts()} className=\"text-xs font-bold text-[#00C2FF] hover:underline\">Refresh</button>\n              </div>\n              <div className=\"divide-y divide-slate-100\">\n                {broadcastList?.map(b => (\n                  <div key={b.id} className=\"p-6 hover:bg-slate-50/50 transition\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <h4 className=\"font-bold text-slate-800\">{b.title}</h4>\n                        <span className=\"text-[10px] text-slate-400 font-bold uppercase\">{new Date(b.createdAt || '').toLocaleString()}</span>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => setEditingBroadcast({ id: b.id, title: b.title, body: b.body, link: b.link })}\n                          className=\"p-1 px-3 rounded border border-[#00C2FF] text-[#00C2FF] text-xs font-bold hover:bg-[#00C2FF] hover:text-white transition\"\n                        >\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => handleDeleteBroadcast(b.id)}\n                          className=\"p-2 text-slate-300 hover:text-red-500 transition\"\n                        >\n                          <Trash2 size={16} />\n                        </button>\n                      </div>\n                    </div>\n                    <p className=\"text-sm text-slate-600 leading-relaxed\">{b.body}</p>\n                    {b.link && (\n                      <div className=\"mt-2 text-[10px] font-bold text-blue-500 flex items-center gap-1\">\n                        ðŸ”— {b.link}\n                      </div>\n                    )}\n                  </div>\n                ))}\n                {(!broadcastList || broadcastList.length === 0) && (\n                  <div className=\"p-12 text-center text-slate-400 italic\">No historical broadcasts found</div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n\n      {/* Edit Broadcast Modal */}\n      {editingBroadcast && (\n        <div className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden\">\n            <div className=\"p-6 border-b border-slate-100 flex justify-between items-center\">\n              <h3 className=\"font-bold text-xl text-slate-800\">Edit Announcement</h3>\n              <button onClick={() => setEditingBroadcast(null)} className=\"text-slate-400 hover:text-slate-600\">âœ•</button>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-xs font-black text-slate-400 uppercase mb-2\">Title</label>\n                <input\n                  className=\"w-full border border-slate-200 rounded-xl p-3 text-sm focus:border-[#00C2FF] outline-none\"\n                  value={editingBroadcast.title}\n                  onChange={e => setEditingBroadcast({ ...editingBroadcast, title: e.target.value })}\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-slate-400 uppercase mb-2\">Body</label>\n                <textarea\n                  className=\"w-full border border-slate-200 rounded-xl p-3 h-32 resize-none text-sm focus:border-[#00C2FF] outline-none\"\n                  value={editingBroadcast.body}\n                  onChange={e => setEditingBroadcast({ ...editingBroadcast, body: e.target.value })}\n                />\n              </div>\n              <div className=\"flex gap-3 mt-4\">\n                <button onClick={() => setEditingBroadcast(null)} className=\"flex-1 py-3 font-bold text-slate-400\">Cancel</button>\n                <button\n                  onClick={handleUpdateBroadcast}\n                  className=\"flex-[2] bg-[#00C2FF] text-white font-bold py-3 rounded-xl shadow-lg shadow-[#00C2FF]/30\"\n                >\n                  Save Changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Direct Push Modal */}\n      {targetUser && (\n        <div className=\"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200\">\n            <div className=\"p-6 border-b border-slate-100 flex justify-between items-center\">\n              <h3 className=\"font-bold text-xl text-slate-800\">Direct Push to {targetUser.name}</h3>\n              <button onClick={() => setTargetUser(null)} className=\"text-slate-400 hover:text-slate-600\">âœ•</button>\n            </div>\n            <div className=\"p-6\">\n              <label className=\"block text-xs font-black text-slate-400 uppercase tracking-widest mb-2\">Message Content</label>\n              <textarea\n                className=\"w-full border border-slate-200 rounded-xl p-4 h-32 resize-none text-slate-700 focus:border-[#00C2FF] outline-none transition\"\n                placeholder=\"Type your message here...\"\n                value={directNotifMessage}\n                onChange={e => setDirectNotifMessage(e.target.value)}\n              />\n              <div className=\"mt-6 flex gap-3\">\n                <button\n                  onClick={() => setTargetUser(null)}\n                  className=\"flex-1 px-4 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50 transition\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={sendDirectNotification}\n                  disabled={sendPushToUserMutation.isLoading || !directNotifMessage}\n                  className=\"flex-[2] bg-[#00C2FF] text-white font-bold py-3 rounded-xl hover:bg-opacity-90 disabled:opacity-50 shadow-lg shadow-[#00C2FF]/30 transition\"\n                >\n                  {sendPushToUserMutation.isLoading ? 'Sending...' : 'Send Now'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst NavItem = ({ icon, label, active, onClick }: any) => (\n  <div\n    onClick={onClick}\n    className={`flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer transition ${active ? 'bg-[#00C2FF] text-white font-bold shadow-lg shadow-[#00C2FF]/20' : 'text-slate-400 hover:bg-slate-800'}`}\n  >\n    {icon}\n    <span>{label}</span>\n  </div>\n);\n\nconst StatCard = ({ title, value, trend, icon }: any) => (\n  <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100\">\n    <div className=\"flex justify-between items-start mb-4\">\n      <div className=\"p-3 bg-slate-50 rounded-xl\">{icon}</div>\n      <span className=\"text-green-500 text-xs font-bold bg-green-50 px-2 py-1 rounded-full\">{trend}</span>\n    </div>\n    <div className=\"text-slate-400 text-sm font-bold uppercase tracking-wider mb-1\">{title}</div>\n    <div className=\"text-3xl font-black text-slate-800\">{value}</div>\n  </div>\n);\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/src/main.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file has exports. Move your component(s) to a separate file.","line":17,"column":10,"nodeType":"Identifier","messageId":"noExport","endLine":17,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport React, { useState } from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { httpBatchLink } from '@trpc/client';\nimport { trpc } from './utils/trpc';\n\nconst getBaseUrl = () => {\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n    return 'http://localhost:4000/trpc';\n  }\n  return 'https://spotch-backend.onrender.com/trpc';\n};\n\nfunction Root() {\n  const [queryClient] = useState(() => new QueryClient());\n  const [trpcClient] = useState(() =>\n    trpc.createClient({\n      links: [\n        httpBatchLink({\n          url: getBaseUrl(),\n          async headers() {\n            const adminId = localStorage.getItem('spotch_admin_id');\n            return adminId ? {\n              'x-user-id': adminId,\n            } : {};\n          },\n        }),\n      ],\n    }),\n  );\n\n  return (\n    <trpc.Provider client={trpcClient} queryClient={queryClient}>\n      <QueryClientProvider client={queryClient}>\n        <App />\n      </QueryClientProvider>\n    </trpc.Provider>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <Root />\n  </React.StrictMode>,\n)\n","usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/src/utils/trpc.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/jun/.gemini/antigravity/scratch/spotch/admin/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
